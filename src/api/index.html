<!DOCTYPE html>
<html>
   <head>
       <title>ServerSendEvent</title>
      <meta charset="utf-8" />
   </head>
   <body>
      Id User:<input type="text" id="idUser" value="1"/>
      <input type="button" id="initButton" value="Start Listening"/>
      <input type="button" id="stopButton" value="Stop Listening"/>
      <hr/>
      <div id="content"></div>
      <script>
         var source;
         document.getElementById('initButton').onclick=function(){
            idUser = document.getElementById("idUser").value;
            source = new EventSource('http://localhost:9220/events/' + idUser);
            source.addEventListener('open', function(e) {
               document.getElementById('content').innerHTML += 'Connections to the server established..<br/>';
            }, false);
            source.onmessage = function(e) {
               document.getElementById('content').innerHTML += e.data + '<br/>';
            };
         }
         document.getElementById('stopButton').onclick=function(){
            document.getElementById('content').innerHTML += 'Listening to server events stopped..<br/>';
            source.close();
         }
      </script>
   </body>
</html>